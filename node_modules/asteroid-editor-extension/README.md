# asteroid-editor-extension
v0.0.1

## About

An `AsteroidEditorExtension` is an Express sub-app used by the Asteroid Editor to plug in custom user interfaces at runtime. `AsteroidEditorExtension` is a base class for `AsteroidEditorGenerator` and `AsteroidSubEditor`.

## Options

### layout

The layout (relative to the global `/views` directory) that views rendered with `req.rendered` will be inserted into.

## Members

### app

A micro Asteroid app (behaves like an express app) which implements the custom UI.

### handle(url, rootUrl, req, res, next)

Called by the editor internally to route requests to `extension.app`. The relative `url` property will temporarily override `req.url` while `extension.app` handles the request.

## Building interfaces

The extension's `app` is automatically configured with the [ejs-locals](https://github.com/RandomEtc/ejs-locals) rendering engine for `*.ejs` files in the `/views` directory, relative to the module's `config.json` file.

The `app` is also automatically configured to serve static assets in the `/public` directory.

Example folder structure:

    \ my-extension
      - config.json
      - main.js
      \ public
        - style.css
      \ views
        - index.ejs

When handling routes, a few properties on the `req` object are overridden or added:

- `req.url`: For ease of routing, `req.url` is overridden to be relative to the extension's url.
- `req.absoluteUrl`: The original value of `req.url`, relative to the parent app's root.
- `req.rootUrl`: The root URL of the extension.
- `req.render()`: Automatically embeds the rendered content into the proper editor layout.

`absoluteUrl` and `rootUrl` are also available on the `viewLocals` object within a view. You can use this to reference static assets along with the `stylesheet()` and `script()` functions from [ejs-locals](https://github.com/RandomEtc/ejs-locals#scriptsrctype):

    <% stylesheet( viewLocals.rootUrl + '/style.css'); %>